# MIDI 作曲工具

这是一个使用Python开发的MIDI音乐生成工具，它提供了图形化界面，可以让你创建、播放和保存MIDI音乐文件，并且直观地显示音符的音高和持续时间。

## 功能特点

- 可视化的音符编辑界面，清晰展示音符的音高和持续时间
- 支持多种音阶（C大调、A小调、G大调等）
- 可调整的速度(BPM)和小节数
- 可以生成随机的音乐片段
- 实时播放MIDI音乐，带有播放位置指示器
- 导出为标准MIDI文件
- 显示每个音符的名称（如C4、G3等）

## 安装要求

在使用前，请确保安装以下依赖：

```
pip install -r requirements.txt
```

## 使用方法

1. 运行主程序：

```
python midi_composer.py
```

2. 使用界面控制：
   - 设置速度(BPM)、小节数、音阶等参数
   - 点击"生成音乐"按钮创建随机音乐
   - 点击"播放"按钮播放生成的音乐
   - 点击"停止"按钮停止播放
   - 点击"保存MIDI"将创作的音乐保存为MIDI文件

## 界面说明

- 上方控制区：调整音乐参数
- 中间区域：音符可视化显示，横轴表示时间，纵轴表示音高
- 红色虚线：播放位置指示器
- 底部状态栏：显示当前操作状态

## 播放音乐

程序使用rtmidi库直接播放MIDI音乐。在播放时：
1. 如果你的计算机连接了MIDI设备，程序会自动使用第一个可用的MIDI设备。
2. 如果没有可用的MIDI设备，程序会创建一个虚拟的MIDI端口。你可以使用如FL Studio、GarageBand等支持MIDI输入的软件连接到此端口来听到声音。
3. 红色虚线会在播放时实时显示当前播放位置。

## 注意事项

- 程序需要Python 3.6或更高版本
- 确保安装所有依赖包以正常运行
- 若要听到声音，请确保你的系统已安装MIDI音源或使用能接收MIDI的音频软件
- Windows用户如果没有MIDI设备，可以使用Microsoft GS Wavetable Synth作为默认MIDI输出
- 保存的MIDI文件可以在数字音频工作站(DAW)软件中打开和编辑 
